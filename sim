{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 21,
   "id": "cea89ef7-079a-414f-b732-0a70bd666602",
   "metadata": {
    "tags": []
   },
   "outputs": [
    {
     "name": "stdin",
     "output_type": "stream",
     "text": [
      "Enter a message for BB84 simulation:  i love science\n"
     ]
    },
    {
     "data": {
      "image/png": "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Z599Zs0bOXKkkWQmTJjg8ponn3zShISEmIyMDGtaWFiYiY+Pz7b8zGVcyl19K1SoYEJDQ83BgwetacnJyUaSKV26tElNTbWmL1y40EgyixYtcrtel66/JOPv729SUlLcxg0YMMCEh4eb/fv3u0x//fXXjSSzc+dOY4wxp06dMhEREWbo0KEucTVq1DDNmze/bF0y17Fdu3Y5zs98X+fMmWNNk2RGjhxpPa9Zs6a5//77L1vOwIED3bZ75vIiIyPNH3/84XZe1rIy36cHHnjAJe7bb781ksyrr77qsm7u+kBsbKyJjY21nm/evNlIMtOnT88We2l/2bVrl5FknnzySZe4jRs3GknmxRdfdClHktm4caNLbI0aNUxcXFy2si41depUEx4ebvWX0qVLm169epm1a9e6xLn7TMXHxxtJZt68eda0CxcumBIlShhJ5rvvvrOmHz9+3Pj7+5v/+7//y3G9M7n7nFzanpdKT083Fy5cMGPGjDHFihVz+Zzeeuutbl+7d+/ebO/JnXfeaUqWLGlOnz5tTbt48aKpWbOmKVu2rLXczDpe+h5NmDDBSDKHDx/Osa4AAN/HESQAUADMmDFDmzdv1ubNm7V06VLFx8dr4MCBmjRpUrbYzp07W7Fr167VW2+9pS1btqh169Y6d+6cFbds2TL16NFDDz74oJYuXaqVK1eqf//+6t27t/WruOS8COiAAQP03HPPqWbNmtdl/cz/P3T+au74cfToUT3++OMqV66cAgICFBgYqAoVKkhyHmlxqfvuu8/lee3atZWWlqajR49eRc0vr27durrpppus59WrV5fkPH2iUKFC2abv37/fo+W2b99eGRkZGjhwoM6ePZtt/uLFi9W8eXOVKVPGOpro4sWLatOmjSRZdzGJiIhQnz59lJCQYN3l6Ouvv1ZKSsoVHynkjvHgwrsNGzbU0qVL9fzzz2v16tUeH0WTVYsWLVS0aFGP47t37+7yvHHjxqpQoYJWrVp1xWVficzlX3rqTsOGDVW9enV99dVXLtOjo6PVsGFDl2m1a9f2qJ/07dtXBw8e1Mcff6whQ4aoXLly+uijjxQbG6t//OMfub7e4XCobdu21vOAgADdfPPNKl26tG677TZrelRUlEqWLOlx3/XE119/rXvvvVeRkZHy9/dXYGCgXn75ZR0/fvyqPqepqanauHGjHn74YYWHh1vT/f391bNnTx08eFC7d+92eY27cULy/DMKAPBNXKQVAAqA6tWrZ7tI6/79+/Xss8+qR48eKlKkiDWvRIkSLrFNmzZViRIl1LVrVyUkJGjAgAEyxqhv3766++67NW3aNCv23nvv1cmTJzV48GB17txZYWFhGj58uAIDAzVo0CDrFIQzZ85Icl4/4sSJE9Y1TtwpX7689uzZo9TUVIWFhbmNybwmQbly5a6oXTIyMtSqVSsdOnRIL730kmrVqqWwsDBlZGTozjvvdPtlu1ixYi7Pg4ODJemqvpjnJioqyuV5UFDQZadnvVbH5cTHx+v+++/Xo48+qnbt2mnx4sUubfvbb7/p888/z/EaNVlP5Rg8eLAmTZqkmTNn6rHHHtOkSZNUtmxZdezY0aO6XE7ml8kyZcrkGPPWW2+pbNmymjNnjsaPH6+QkBDFxcXpH//4h2655RaPysnpWhs5iY6Odjst87Se6+Vy1wYpU6ZMti/fl/ZVydlfPe2rkZGR6tq1q7p27SpJ2rlzp+69914NHz5cjz76qMu4calChQpluxZRUFBQtr6bOd3TvpubTZs2qVWrVmrWrJnef/996xo6Cxcu1NixY6/qc/rnn3/KGJNju0vK9t7n5TgBAMg7HEECAAVU7dq19ddff+nHH3/0KFZyXhNDcn6BPnz4cLZfpyXp9ttvV2pqqpW02LFjh/bt26fo6GgVLVpURYsWta4nEh8fr6JFi7pc5PRSrVq1Unp6uttbEkvOowwWLVqkYsWKqU6dOpJkfTHLesSLpGzXaNixY4e+//57/eMf/9DgwYPVrFkz3X777W6/WHqDp/XKC/369dPUqVO1du1atW3b1joCRJKKFy+uVq1aWUcSXfro16+fFXvzzTerTZs2evvtt/Xrr79q0aJFevzxx10u6Hs1jDH6/PPPFRYWlu0aKVmFhYVp9OjR+uGHH3TkyBFNmTJFGzZsyPGaNe5c6ZFHR44ccTsta78JCQnJ9j5L1/ZeZy7f3TVBDh06pOLFi1/1sj1x66236pFHHtGFCxc8Gjeu1rV8TmbPnq3AwEAtXrxYnTt3VuPGjS/bfzxRtGhR+fn55djukq572wMAfAMJEgAooJKTkyU5jxjxNLZkyZKSnF8YQkJCtGHDhmyxiYmJ8vPzs35t/de//qVVq1a5PN544w1JzrtVrFq1yuWw9Uv169dPpUqV0gsvvOD28PgJEybohx9+0OOPP279Spt5N4pt27a5xC5atMjleeYX48zXZXr33XdzrI8ncvqVPqd65ZT8ud769OmjqVOnat26dWrTpo11ZE/79u21Y8cOVa5cWQ0aNMj2uPSIjqFDh2rbtm2Kj4+Xv7+/dSHXazF69GilpKRo6NChbu+K5E6pUqXUu3dvde3aVbt377ZOH/L2r/czZ850eb5+/Xrt37/fujuN5HyvL32ff/zxx2ynYlxJ3Vq0aCFJ2S6yunnzZu3atUv33HOPx+twOcePH9f58+fdzvvhhx8kXf6onmt1LZ8Th8OhgIAAlwTdX3/9pQ8//DBbrKdH04SFhemOO+7Q/PnzXeIzMjL00UcfqWzZsqpSpUquywEA5H+cYgMABcCOHTus27MeP35c8+fP18qVK/XAAw+oUqVKLrG//fablfhIS0tTcnKyXn31VRUpUkR9+vSR5Pxi8eSTT2rixInq1auXunTpIn9/fy1cuFAff/yx+vXrZx1KX7du3Rzrdeutt7p8qXSnSJEimjdvntq3b6/69evrb3/7m+rUqaNTp05pzpw5mjlzplq2bOlyO9bbb79dVatW1TPPPKOLFy+qaNGiWrBggdatW+ey7GrVqqly5cp6/vnnZYxRVFSUPv/8c61cudKTZs1RrVq1tHr1an3++ecqXbq0IiIiVLVqVbVt21ZRUVHq16+fxowZo4CAACUkJOjXX3+9pvKuRe/eveXn56c+ffqoTZs2Wrp0qcaMGaOVK1eqcePGGjJkiKpWraq0tDTt27dPX3zxhd555x2VLVvWWkbLli1Vo0YNrVq1Sj169LASaZ44ceKE1d9SU1O1e/duzZ49W9988406d+6s0aNHX/b1d9xxh9q3b6/atWuraNGi2rVrlz788EM1atTIuk5LrVq1JEnjx49XmzZt5O/vr9q1a1unJl2pLVu2qH///urUqZN+/fVXDR8+XDfddJOefPJJK6Znz57q0aOHnnzyST300EPav3+/JkyYkC0hWblyZYWGhmrmzJmqXr26wsPDVaZMGbcJiKpVq+qxxx7Tv//9b/n5+alNmzbat2+fXnrpJZUrV87lbkrXYtWqVRo6dKi6d++uxo0bq1ixYjp69KhmzZqlZcuWqVevXi7vv7ddy+ekXbt2mjhxorp166bHHntMx48f1+uvv54tCSo5+8Xs2bM1Z84cxcTEKCQkxOorl3rttdfUsmVLNW/eXM8884yCgoI0efJk7dixQ7Nmzbqq6x8BAPKhG3iBWADANXJ3F5vIyEhTt25dM3HiRJOWluYSf2lsYGCgiYmJMX369DE//fSTS2x6erp5//33TYMGDUyRIkVM4cKFzW233WYmTZpkzp8/f9l6XcldbDLt37/fPPnkk6ZSpUomMDDQquOYMWPMxYsXs8X/+OOPplWrVqZw4cKmRIkSZvDgwWbJkiXZ7riRkpJiWrZsaSIiIkzRokVNp06dzIEDB7LdwSTzzhq///67Sznu7qyRnJxsmjRpYgoVKmQkudwpY9OmTaZx48YmLCzM3HTTTWbkyJHmP//5j9u72Li7w4skM3DgQJdpmXfd+Mc//nHZNrxcu3/44YfG39/fNG7c2Jw6dcr8/vvvZsiQIVZ7R0VFmfr165vhw4e7vaPRqFGjjCSzYcOGy9YhqwoVKljvo8PhMOHh4aZq1aqmZ8+eZvny5W5fc+n78vzzz5sGDRqYokWLmuDgYBMTE2Oeeuopc+zYMSvm3Llzpn///qZEiRLG4XC4tLW79syprMz3esWKFaZnz56mSJEiJjQ01LRt29bs2bPH5bUZGRlmwoQJJiYmxoSEhJgGDRqYr7/+2u1dV2bNmmWqVatm9evMMt3dzSU9Pd2MHz/eVKlSxQQGBprixYubHj16mF9//dUlLjY21tx6663Z1ik+Pt5UqFDB7fpm+vXXX82IESNMkyZNTHR0tAkICDARERHmjjvuMP/+979dPm853cUmLCws23JzqpO7vu7p58Rde06bNs1UrVrV6g+vvfaamTp1arbX7tu3z7Rq1cpEREQYSVa7uLuLjTHGfPPNN6ZFixYmLCzMhIaGmjvvvNN8/vnnLjGZfWTz5s0u03O7gxYAIH9wGOPBJeQBAMhj27dvV9OmTVW3bl0tXbpUoaGhN7pKttagQQM5HA5t3rz5RlcFAADguuAUGwCAT6pVq5Y+++wzxcXF6cEHH9Rnn3121adM4OqcOnVKO3bs0OLFi7V161YtWLDgRlcJAADguuEIEgAA4Nbq1avVvHlzFStWTIMGDXK5DgwAAEBBQ4IEAAAAAADYHrf5BQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSACgAHvrLcnhkGrWdD/f4ZBGjfrf89WrndNWr86DygHAtUhIcA5YWR8lSkjNmkmLF1/dMh0OadAgb9YSAJCPkCABgAJs2jTn3507pY0bc4+vV09KTHT+BYB8Yfp058C1fr303nuSv7/UoYP0+ec3umYAgHyGBAkAFFBbtkjffy+1a+d8PnVq7q8pXFi6807nXwDIF2rWdA5cjRpJDzzgPHokOFiaNetG1wwAkM+QIAGAAiozITJunNS4sTR7tnT27OVfk9MpNhs3On+QLVZMCgmRKleWhg1zjdmzR+rWTSpZ0vndpHp16e23vbQyAOCpkBApKEgKDPzftD/+kJ58UrrpJue8mBhp+HDp3Dn3y3j3XalKFedgVqOGcwAFABR4ATe6AgAA7/vrL+ePp7ff7vxxtW9fqX9/6dNPpfj4K1vW8uXO5Ej16tLEiVL58tK+fdKKFf+LSUlxJmHKl5f++U8pOtr5uiFDpGPHpJEjvbp6APA/6enSxYuSMdJvv0n/+IeUmurM2EpSWprUvLn088/S6NFS7drSN99Ir70mJSdLS5a4Lm/RImnVKmnMGCksTJo8WeraVQoIkB5+OM9XDwCQd0iQAEABNHeudPKk1K+f83mXLs4jPqZOvfIEycCBzsTHxo3OH2Yz9enzv///7/+kiAhp3br/nZ7TsqXzx9lx45yJkqJFr2mVAMC9O+90fR4cLE2aJMXFOZ9/8IG0bZv0ySdSp07OaS1bSuHh0nPPSStXOp9nOnZM2rxZKlXK+bxtW2em+YUXSJAAQAHHKTYAUABNnSqFhkqPPOJ8Hh7u/F7wzTfOU2E89eOPzh9d+/VzTY5klZYmffWV89T/QoWcP+RmPtq2dc7fsOHa1wkA3Joxw5nQ2LxZWrrUmQUeONCZJJGkr792HglyaXKjd2/n36++cp1+zz3/S45Izou+duki/fSTdPDgdVsNAMCNR4IEAAqYn36S1q51XpzVGOnECecj87tB5p1tPPH7786/ZcvmHHP8uDMZ8u9/O0/5z/po29YZc+zY1awJAHigenWpQQPno3Vr5/VDWrWSnn3WOfgdP+4878/hcH1dyZLO02aOH3edHh2dvYzMaZfGAgAKFE6xAYACZto0Z2Jk7lzn41IffCC9+qrzR9HclCjh/Hu5H02LFnUuq2dP54+27lSqlHtZAOA1tWs7L4T044/Oq0tv3OgcGLMmSY4edWZ3ixd3fe2RI9mXlzmtWLHrV2cAwA1HggQACpD0dGcCpHJl6T//yT5/8WLnRVSXLpXat899eVWqOJc1bZrzOiPBwdljChVyXv8wKcn5nSQo6NrXAwCuSXKy82+JEs5TZj75RFq40HkuYKYZM5x/77nH9bVffeW82GvmaTbp6dKcOc7B8HKH0wEA8j0SJABQgCxdKh06JI0fLzVrln1+zZrO0/KnTvUsQSI5b9XboYPzOohPPeW8YOuBA84fZ2fOdMa8+aZ0111S06bSE09IFStKp087T/f5/HPnJQAA4LrYscN5JIjkPAVm/nznhVcfeMB5+FqvXs6BLD7eeQuuWrWcV5T++9+d5wHee6/r8ooXl1q0kF566X93sfnhB271CwA2QIIEAAqQqVOdR3BkvcNMVsWLO78zzJ3r/IHUE3FxzmuajBnjvBtNWprzR9T77vtfTI0a0nffSa+8Io0Y4TxyvUgR6ZZb/ncdEgC4LrIOeJGRzqTIxInSk086p4WEOG/bO3y48xbAv/8u3XST9Mwz7u9Bft990q23OgezAwecR47MnOm8UCsAoEBzGGPMja4EAAAAAADAjcRdbAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYXsCNrgAAwPcYI50+LZ0/LwUFSRERksNxo2sFANeAgQ0AkAsSJAAASdKOHdLHH0sbN0pbtkinTv1vXuHCUoMG0h13SN26STVr3rh6AoDHGNgAAFfAYYwxN7oSAIAbZ8kS6bXXpG+/lQICpPR05w+tl3I4JH9/6eJFqUkT6cUXpbZt876+AJArBjYAwFUgQQIANnX8uDR4sDRrluTnJ2VkeP7azPhu3aR//1uKirp+9QQAjzGwAQCuAQkSALChbdukli2d3yXS069+Of7+UrFi0pdfSrVqea9+AHDFGNgAANeIBAkA2My2bVLTplJq6rV9h8jk7y+FhUnr1vFdAsANwsAGAPACEiQAYCPHj0s1alz7D6yXyvzBddcujkoHkMcY2AAAXuJ3oysAAMg7gwd7/zuE5Fxe5qn/AJCnGNgAAF7CESQAYBNLlkjt2+dNOdwEAkCeYGADAHgRCRIAsIm77pISE6/spg5Xyt9fatRI+uab61cGAFgY2AAAXkSCBABsYMeOvL3O4I4d0q235l15AGyIgQ0A4GVcgwQAbODjj6WAgLwpKyDAWR4AXFcMbAAALyNBAgA2sHGjdPFi3pSVnu4sDwCuKwY2AICXcYoNABRwxkhFikinTuVdmYULSydOSA5H3pUJwEYY2AAA1wFHkABAAXf6dN5+h5Cc5Z05k7dlArARBjYAwHVAggQACrjz5+1VLgAbYGADAFwHJEgAoIALCrJXuQBsgIENAHAdkCABgAIuIsJ56nxeKlxYCg/P2zIB2AgDGwDgOiBBAgAFnMMhNWiQt+XdfjvXMQRwHTGwAQCuAxIkAGADd9whBQTkTVn+/s7yAOC6YmADAHgZt/kFABvYsUOqVStvy7v11rwrD4ANMbABALyMI0gAwAZq1pSaNJH8rvOo7+8v3XUX3yEA5AEGNgCAl5EgAQCbeOEFKSPj+paRnu4sBwDyBAMbAMCLSJAAgE20ayd17er8MfR68PeXunWT2ra9PssHgGwY2AAAXsQ1SADARo4fl2rUcP5NT/fecv39pWLFpF27pKgo7y0XAHLFwAYA8BKOIAEAGylWTPrySykszHs/uPr7O5f35Zd8hwBwAzCwAQC8hAQJANhMrVrSunXO7xTX+l0i8wfWdevy9mYSAOCCgQ0A4AUkSADAhmrVch413qWL8/mVfp/IjH/kEedy+A4B4IZjYAMAXCMSJABgU1FR0syZ0pIlUqNGzmkBAZLD4T7e4XDOl5zxS5ZIH33E0ecAfAgDGwDgGnCRVgCAJGnnTunjj6WNG6XNm6VTp/43r3Bh6fbbpTvucN7Q4dZbb1w9AcBjDGwAgCtAggQAkI0x0pkz0vnzUlCQFB6e8w+wAJAvMLABAHJBggQAAAAAANge1yABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABgeyRIAAAAAACA7ZEgAQAAAAAAtkeCBAAAAAAA2B4JEgAAAAAAYHskSAAAAAAAgO2RIAEAAAAAALZHggQAAAAAANgeCRIAAAAAAGB7JEgAAAAAAIDtkSABAAAAAAC2R4IEAAAAAADYHgkSAAAAAABge9c9QdKsWTMNGzbMq8scNWqU6tat69VlAgAAAAAA+/JKgqR3795yOBzZHj/99JPmz5+vV155xRvFeGzfvn1yOBxKTk62pp0+fVrNmjVTtWrV9Ouvv+ZJPf7880/17NlTkZGRioyMVM+ePXXixAmXmAMHDqhDhw4KCwtT8eLFNWTIEJ0/f94lZvv27YqNjVVoaKhuuukmjRkzRsYYa/7hw4fVrVs3Va1aVX5+fm4TUjt37tRDDz2kihUryuFw6F//+le2mLVr16pDhw4qU6aMHA6HFi5cmC1m/vz5iouLU/HixbO1cab33ntPzZo1U+HCheVwOLKtsySNHTtWjRs3VqFChVSkSBE3rScNHTpU9evXV3BwsNuEWFpamnr37q1atWopICBA999/v9vlrFmzRvXr11dISIhiYmL0zjvvZIuZN2+eatSooeDgYNWoUUMLFixwme+ttjl37pwGDx6s4sWLKywsTPfdd58OHjzoEuNJv/GltpGkyZMnq1KlSgoJCVH9+vX1zTffuMw3xmjUqFEqU6aMQkND1axZM+3cufOK28aX+o23PlOetI23PlO5jTeetI23xhvJt/qNN9pG8k6/8aRt8tt442vbKV8abzxpGyn/bacK4niTV2OxlPu+n5R3+zfeGot9ab/Y19rGG+ONJ20j+dZ2ypPPlC/tF+flvl9e7d9IvtVvvDUWXwuvHUHSunVrHT582OVRqVIlRUVFKSIiwlvFXJXff/9dzZs315kzZ7Ru3TqVK1cuT8rt1q2bkpOTtWzZMi1btkzJycnq2bOnNT89PV3t2rVTamqq1q1bp9mzZ2vevHl6+umnrZhTp06pZcuWKlOmjDZv3qx///vfev311zVx4kQr5ty5cypRooSGDx+uOnXquK3L2bNnFRMTo3Hjxik6OtptTGpqqurUqaNJkybluE6pqalq0qSJxo0bl2PM2bNn1bp1a7344os5xpw/f16dOnXSE088kWOMMUZ9+/ZVly5d3M5PT09XaGiohgwZonvvvddtzN69e9W2bVs1bdpUSUlJevHFFzVkyBDNmzfPiklMTFSXLl3Us2dPff/99+rZs6c6d+6sjRs3uqy3N9pm2LBhWrBggWbPnq1169bpzJkzat++vdLT062Y3PqNr7XNnDlzNGzYMA0fPlxJSUlq2rSp2rRpowMHDlgxEyZM0MSJEzVp0iRt3rxZ0dHRatmypU6fPn1FbeNL/cZbnylP2sYbnylPxhtP2sZb440v9RtvtY23+o0nbZPfxhtf20750njjSdvkt+1UQR1v8mos9mTfLy/3b7w1FvvSfrGvtY03xhtv9Zu83E558pnypf3ivNz3y6v9G1/rN94ai6+J8YL4+HjTsWNHt/NiY2PN0KFDrecVKlQwY8eONX369DHh4eGmXLly5t1333V5zbPPPmtuueUWExoaaipVqmRGjBhhzp8/b80fOXKkqVOnTo712bt3r5FkkpKSzIEDB0zVqlVNs2bNzKlTp6yYc+fOmb/97W+mTJkyplChQqZhw4Zm1apVxhhjzpw5YyIiIsynn37qstxFixaZQoUKuSwnJykpKUaS2bBhgzUtMTHRSDI//PCDMcaYL774wvj5+Zn//ve/VsysWbNMcHCwOXnypDHGmMmTJ5vIyEiTlpZmxbz22mumTJkyJiMjI1u5l7a3OxUqVDBvvPHGZWMkmQULFuQ4P2sb52TVqlVGkvnzzz9zjJk+fbqJjIy8bF1ye7+NybkPPvvss6ZatWou0wYMGGDuvPNO63nnzp1N69atXWLi4uLMI4884rasq22bEydOmMDAQDN79mxr2n//+1/j5+dnli1bZozxrN9k5Qtt07BhQ/P444+7xFSrVs08//zzxhhjMjIyTHR0tBk3bpw1Py0tzURGRpp33nnHGONZ22TlC/0mq6v9THnSNlldy2fKk/Emq8uN65muZbzxpX7jrbbxVr/JrW2yyi/jTVY3ejvla+NNVjm1TX7bThXE8Sar6z0We7Lvl1f7N94ai31tv9iX2iaraxlvvNVvsrqe26mscvpM+dp+cVbXc98vL/dvfKnfXI+x+GrckIu0/vOf/1SDBg2UlJSkJ598Uk888YR++OEHa35ERIQSEhKUkpKiN998U++//77eeOONKy5n9+7datKkiapVq6Zly5a5HMnSp08fffvtt5o9e7a2bdumTp06qXXr1tqzZ4/CwsL0yCOPaPr06S7Lmz59uh5++GFFRESoWbNm6t27d45lJyYmKjIyUnfccYc17c4771RkZKTWr19vxdSsWVNlypSxYuLi4nTu3Dlt3brViomNjVVwcLBLzKFDh7Rv374rbhO7SUxMVKtWrVymxcXFacuWLbpw4cJlYzLfJ2/ZunWrLly44FJWmTJlVLNmTZc+kVu/8RZvtM358+e1devWbDGtWrWyYvbu3asjR464xAQHBys2NtaK8aRt8pInbeMNnrSNt3gy3uQVX+s33mobb/QbT9rGE7423vgSXxtvPJHftlMFcbzxFm/t++XV/o23xmJf2y/2pbbxFm/1m9x4azvlCV/bL/YGX9u/8aV+k5dj8eV4LUGyePFihYeHW49OnTrlGNu2bVs9+eSTuvnmm/Xcc8+pePHiWr16tTV/xIgRaty4sSpWrKgOHTro6aef1ieffHLFderVq5cqV66sefPmubzpP//8s2bNmqVPP/1UTZs2VeXKlfXMM8/orrvuspIi/fv31/Lly3Xo0CFJ0rFjx7R48WL17dtXklS+fHmVLl06x7KPHDmikiVLZptesmRJHTlyxIopVaqUy/yiRYsqKCjosjGZzzNjkLOc2u/ixYs6duzYZWO83b5HjhxRUFCQihYtmmNZnvQbb9bnWtvm2LFjSk9Pv2xM5t/cYnJrm7zkSdt4q5zMZV9aVl6835eO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cmUFBQWpatWq+vDDD615Xbt21SOPPOISf+HCBRUvXlzTp0+XJBljNGHCBMXExCg0NFR16tTR3LlzL1vm5MmTdcsttygkJESlSpXSww8/bM3LyMjQ+PHjdfPNNys4OFjly5fX2LFjJbk/xSYlJUVt27ZVeHi4SpUqpZ49e+rYsWPW/GbNmmnIkCF69tlnFRUVpejoaI0aNcqlPpfrL5K0fv163X333QoNDVW5cuU0ZMgQpaametbAAAAUECRIAAC2d+bMGc2cOVM333yzihUrJkk6e/asWrduraJFi2rz5s369NNP9eWXX2rQoEEur/3qq6+0a9curVq1SrNmzdKCBQs0evToHMvauHGj+vbtqyeffFLJyclq3ry5Xn31VZeY5cuXq0ePHhoyZIhSUlL07rvvKiEhwfoSnZGRoTZt2mj9+vX66KOPlJKSonHjxsnf399axtmzZ/Xaa6/pP//5j3bu3KkGDRooJibGJTlw8eJFffTRR+rTp4/L68aOHasPPvhA3377rU6dOmUlELp06aKnn35at956q3X0TZcuXWSMUbt27XTkyBF98cUX2rp1q+rVq6d77rlHf/zxhyTpk08+0ciRIzV27Fht2bJFpUuX1uTJk13We/Xq1XI4HNq3b5+nb12uFixYoKFDh+rpp5/Wjh07NGDAAPXp00erVq2SJHXv3l2LFi1ySXwtX75cqampeuihhyRJI0aM0PTp0zVlyhTt3LlTTz31lHr06KE1a9a4LXPLli0aMmSIxowZo927d2vZsmVWEkqSXnjhBY0fP14vvfSSUlJS9PHHH6tUqVJul3X48GHFxsaqbt262rJli5YtW6bffvtNnTt3don74IMPFBYWpo0bN2rChAkaM2aMVq5cKSn3/rJ9+3bFxcXpwQcf1LZt2zRnzhytW7cuW18HAKDAMwAA2Ex8fLzx9/c3YWFhJiwszEgypUuXNlu3brVi3nvvPVO0aFFz5swZa9qSJUuMn5+fOXLkiLWcqKgok5qaasVMmTLFhIeHm/T0dLdld+3a1bRu3dplWpcuXUxkZKT1vGnTpubvf/+7S8yHH35oSpcubYwxZvny5cbPz8/s3r3bbRnTp083kkxycrLL9PHjx5vq1atbzxcuXGjCw8Otdcx83YYNG6yYXbt2GUlm48aNxhhjRo4caerUqeOy3K+++soULlzYpKWluUyvXLmyeffdd40xxjRq1Mg8/vjjLvPvuOMOl2Vt3LjRVK1a1Rw8eNDtehnjbPOOHTvmOH/69Okubdm4cWPz6KOPusR06tTJtG3b1hhjzPnz503x4sXNjBkzrPldu3Y1nTp1MsYYc+bMGRMSEmLWr1/vsox+/fqZrl27uq3DvHnzTOHChc2pU6eyzTt16pQJDg4277//vtvX7t2710gySUlJxhhjXnrpJdOqVSuXmF9//dVIst7/2NhYc9ddd7nE3H777ea5554zxuTeX3r27Gkee+wxl2nffPON8fPzM3/99Zfb1wAAUBBxBAkAwJaaN2+u5ORkJScna+PGjWrVqpXatGmj/fv3S5J27dqlOnXqKCwszHpNkyZNlJGRod27d1vT6tSpo0KFClnPGzVqpDNnzlinpVxq165datSokcu0S59v3bpVY8aMUXh4uPV49NFHdfjwYZ09e1bJyckqW7asqlSpkuP6BQUFqXbt2i7TevfurZ9++kkbNmyQJE2bNk2dO3d2WceAgAA1aNDAel6tWjUVKVJEu3btyrGsrVu36syZMypWrJhLnffu3auff/7Z4/Vu2LChfvjhB9100005lnWldu3apSZNmrhMa9KkibU+gYGB6tSpk2bOnClJSk1N1Weffabu3btLcp7ekpaWppYtW7qs24wZM6x1u1TLli1VoUIFxcTEqGfPnpo5c6bOnj1r1efcuXO65557PKr/1q1btWrVKpeyq1WrJkku5V/6XpcuXVpHjx6VpFz7y9atW5WQkOBSRlxcnDIyMrR3716P6gkAQEHAFcAAALYUFhamm2++2Xpev359RUZG6v3339err74qY4wcDofb1+Y03ZMYY0yur83IyNDo0aP14IMPZpsXEhKi0NDQXJcRGhqarQ4lS5ZUhw4dNH36dMXExOiLL77Q6tWrPar75dY5IyNDpUuXdrssX7ig6qV1v/S97d69u2JjY3X06FGtXLlSISEhatOmjSRZF7ddsmRJtsRNcHCw2/IiIiL03XffafXq1VqxYoVefvlljRo1Sps3b/bovcsqIyNDHTp00Pjx47PNK126tPV/YGCgyzyHw2HVPbcyMzIyNGDAAA0ZMiTbvPLly19RfQEAyM9IkAAAIOcXSj8/P/3111+SpBo1auiDDz5QamqqdYTFt99+Kz8/P5df4r///nv99ddf1pfQDRs2KDw8XGXLlnVbTo0aNawjODJd+rxevXravXu3SwInq9q1a+vgwYP68ccfL3sUiTv9+/fXI488orJly6py5crZjq64ePGitmzZooYNG0qSdu/erRMnTlhHLQQFBSk9PT1bfY8cOaKAgABVrFjRbbnVq1fXhg0b1KtXrxzX+3qoXr261q1b51Lu+vXrVb16det548aNVa5cOc2ZM0dLly5Vp06dFBQUJEnWRW4PHDig2NhYj8sNCAjQvffeq3vvvVcjR45UkSJF9PXXX6tt27YKDQ3VV199pf79++e6nHr16mnevHmqWLHiVd/ZJrf+Uq9ePe3cuTPH/gYAgF1wig0AwJbOnTunI0eO6MiRI9q1a5cGDx6sM2fOqEOHDpKcRxWEhIQoPj5eO3bs0KpVqzR48GD17NnT5YKa58+fV79+/ZSSkqKlS5dq5MiRGjRokPz83G9ihwwZomXLlmnChAn68ccfNWnSJC1btswl5uWXX9aMGTM0atQo7dy5U7t27dKcOXM0YsQISVJsbKzuvvtuPfTQQ1q5cqX27t2rpUuXZluOO3FxcYqMjNSrr77qcnHWTIGBgRo8eLA2btyo7777Tn369NGdd95pJUwqVqyovXv3Kjk5WceOHdO5c+d07733qlGjRrr//vu1fPly7du3T+vXr9eIESO0ZcsWSdLQoUM1bdo0TZs2TT/++KNGjhypnTt3upS9adMmVatWTf/9739zXQ9P/e1vf1NCQoLeeecd7dmzRxMnTtT8+fP1zDPPWDEOh0PdunXTO++8o5UrV6pHjx7WvIiICD3zzDN66qmn9MEHH+jnn39WUlKS3n77bX3wwQduy1y8eLHeeustJScna//+/ZoxY4YyMjJUtWpVhYSE6LnnntOzzz5rnaazYcMGTZ061e2yBg4cqD/++ENdu3bVpk2b9Msvv2jFihXq27dvtkRVTnLrL88995wSExM1cOBAJScna8+ePVq0aJEGDx7saTMDAFAw3OBroAAAkOfi4+ONJOsRERFhbr/9djN37lyXuG3btpnmzZubkJAQExUVZR599FFz+vRpl+V07NjRvPzyy6ZYsWImPDzc9O/fP9vFSi81depUU7ZsWRMaGmo6dOhgXn/9dZcLixpjzLJly0zjxo1NaGioKVy4sGnYsKF57733rPnHjx83ffr0McWKFTMhISGmZs2aZvHixcaY7BcqvdRLL71k/P39zaFDh1ymZ75u3rx5JiYmxgQFBZkWLVqYffv2WTFpaWnmoYceMkWKFDGSzPTp040xzouPDh482JQpU8YEBgaacuXKme7du5sDBw5Yrx07dqwpXry4CQ8PN/Hx8ebZZ591uUjrqlWrjCSzd+/eHOt+pRdpNcaYyZMnm5iYGBMYGGiqVKnickHWTDt37jSSTIUKFUxGRobLvIyMDPPmm2+aqlWrmsDAQFOiRAkTFxdn1qxZ47YO33zzjYmNjTVFixY1oaGhpnbt2mbOnDnW/PT0dPPqq6+aChUqmMDAQFO+fHnroryXXqTVGGN+/PFH88ADD5giRYqY0NBQU61aNTNs2DCrnrGxsWbo0KEudejYsaOJj4+3nl+uvxhjzKZNm0zLli1NeHi4CQsLM7Vr1zZjx47NsZ0BACiIHMZ4cDI0AAAoMB599FH99ttvWrRokcv0hIQEDRs2TCdOnLgxFQMAALiBuAYJAAA2cfLkSW3evFkzZ87UZ599dqOrAwAA4FNIkAAAYBMdO3bUpk2bNGDAALVs2fJGVwcAAMCncIoNAAAAAACwPe5iAwAAAAAAbI8ECQAAAAAAsD0SJAAAAAAAwPZIkAAAAAAAANsjQQIAAAAAAGyPBAkAAAAAALA9EiQAAAAAAMD2SJAAAAAAAADbI0ECAAAAAABsjwQJAAAAAACwPRIkAAAAAADA9kiQAAAAAAAA2yNBAgAAAAAAbI8ECQAAAAAAsD0SJAAAAAAAwPZIkAAAAAAAANsjQQIAAAAAAGyPBAkAAAAAALA9EiQAAAAAAMD2SJAAAAAAAADbI0ECAAAAAABsjwQJAAAAAACwPRIkAAAAAADA9kiQAAAAAAAA2yNBAgAAAAAAbI8ECQAAAAAAsD0SJAAAAAAAwPZIkAAAAAAAANsjQQIAAAAAAGyPBAkAAAAAALA9EiQAAAAAAMD2SJAAAAAAAADbI0ECAAAAAABsjwQJAAAAAACwPRIkAAAAAADA9kiQAAAAAAAA2/t/SN4sqMfq/qsAAAAASUVORK5CYII=",
      "text/plain": [
       "<Figure size 800x400 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "import cirq\n",
    "import random\n",
    "import matplotlib.pyplot as plt\n",
    "import matplotlib.animation as animation\n",
    "\n",
    "def simulate_photon(alice_basis, alice_bit, bob_basis):\n",
    "    q = cirq.LineQubit(0)\n",
    "    circuit = cirq.Circuit()\n",
    "    \n",
    "    if alice_basis == 0:\n",
    "        if alice_bit == 1:\n",
    "            circuit.append(cirq.X(q))\n",
    "    else:\n",
    "        if alice_bit == 0:\n",
    "            circuit.append(cirq.H(q))\n",
    "        else:\n",
    "            circuit.append(cirq.X(q))\n",
    "            circuit.append(cirq.H(q))\n",
    "    \n",
    "    if bob_basis == 1:\n",
    "        circuit.append(cirq.H(q))\n",
    "    circuit.append(cirq.measure(q, key='m'))\n",
    "    \n",
    "    sim = cirq.Simulator()\n",
    "    result = sim.run(circuit, repetitions=1)\n",
    "    measurement = int(result.measurements['m'][0][0])\n",
    "    return measurement\n",
    "\n",
    "def string_to_bits(message):\n",
    "    bits = []\n",
    "    for char in message:\n",
    "        ascii_val = ord(char)\n",
    "        for i in range(7, -1, -1):\n",
    "            bits.append((ascii_val >> i) & 1)\n",
    "    return bits\n",
    "\n",
    "def bits_to_string(bits):\n",
    "    chars = []\n",
    "    for i in range(0, len(bits), 8):\n",
    "        byte = bits[i:i+8]\n",
    "        if len(byte) < 8:\n",
    "            break\n",
    "        ascii_val = 0\n",
    "        for b in byte:\n",
    "            ascii_val = (ascii_val << 1) | b\n",
    "        chars.append(chr(ascii_val))\n",
    "    return ''.join(chars)\n",
    "\n",
    "def xor_lists(a, b):\n",
    "    return [x ^ y for x, y in zip(a, b)]\n",
    "\n",
    "def simulate_bb84(message):\n",
    "    message_bits = string_to_bits(message)\n",
    "    required = len(message_bits)\n",
    "    key = []\n",
    "    events = []\n",
    "    photon_count = 0\n",
    "\n",
    "    while len(key) < required:\n",
    "        photon_count += 1\n",
    "        alice_basis = random.choice([0, 1])\n",
    "        alice_bit = random.choice([0, 1])\n",
    "        bob_basis = random.choice([0, 1])\n",
    "        \n",
    "        bob_bit = simulate_photon(alice_basis, alice_bit, bob_basis)\n",
    "        match = (alice_basis == bob_basis)\n",
    "        if match:\n",
    "            key.append(alice_bit)\n",
    "        \n",
    "        events.append({\n",
    "            'photon_number': photon_count,\n",
    "            'alice_basis': alice_basis,\n",
    "            'alice_bit': alice_bit,\n",
    "            'bob_basis': bob_basis,\n",
    "            'bob_bit': bob_bit,\n",
    "            'match': match,\n",
    "            'current_key': key.copy()\n",
    "        })\n",
    "    \n",
    "    key = key[:required]\n",
    "    ciphertext = xor_lists(message_bits, key)\n",
    "    decrypted_bits = xor_lists(ciphertext, key)\n",
    "    decrypted_message = bits_to_string(decrypted_bits)\n",
    "    return events, key, ciphertext, decrypted_message\n",
    "\n",
    "def animate_events(events, final_info, frames_per_event=30):\n",
    "    fig, ax = plt.subplots(figsize=(8, 4))\n",
    "    ax.set_xlim(-2, 2)\n",
    "    ax.set_ylim(-1, 1)\n",
    "    ax.set_title(\"BB84 Quantum Key Distribution Simulation\")\n",
    "    ax.axis('off')\n",
    "    \n",
    "    ax.plot(-1, 0, marker='o', markersize=20, color='blue')\n",
    "    ax.plot(1, 0, marker='o', markersize=20, color='red')\n",
    "    ax.text(-1, 0.7, \"Alice\", ha='center', fontsize=12, color='blue')\n",
    "    ax.text(1, 0.7, \"Bob\", ha='center', fontsize=12, color='red')\n",
    "    \n",
    "    photon_dot, = ax.plot([], [], marker='o', color='green', markersize=10)\n",
    "    info_text = ax.text(0, -0.8, \"\", ha='center', fontsize=10)\n",
    "    \n",
    "    total_frames = len(events) * frames_per_event + frames_per_event\n",
    "\n",
    "    def init():\n",
    "        photon_dot.set_data([], [])\n",
    "        info_text.set_text(\"\")\n",
    "        return photon_dot, info_text\n",
    "\n",
    "    def update(frame):\n",
    "        event_index = frame // frames_per_event\n",
    "        frame_in_event = frame % frames_per_event\n",
    "\n",
    "        if event_index < len(events):\n",
    "            t = frame_in_event / (frames_per_event - 1)\n",
    "            x = -1 + 2 * t\n",
    "            y = 0\n",
    "            photon_dot.set_data(x, y)\n",
    "            event = events[event_index]\n",
    "            info_str = (\n",
    "                f\"Photon {event['photon_number']}\\n\"\n",
    "                f\"Alice: basis={event['alice_basis']}, bit={event['alice_bit']}\\n\"\n",
    "                f\"Bob: basis={event['bob_basis']}, measured={event['bob_bit']}\\n\"\n",
    "                f\"Match: {event['match']}\\n\"\n",
    "                f\"Key so far: {''.join(str(bit) for bit in event['current_key'])}\"\n",
    "            )\n",
    "            info_text.set_text(info_str)\n",
    "        else:\n",
    "            photon_dot.set_data([], [])\n",
    "            final_str = (\n",
    "                f\"Final Key: {final_info['key']}\\n\"\n",
    "                f\"Ciphertext: {final_info['ciphertext']}\\n\"\n",
    "                f\"Bob decrypted: {final_info['decrypted_message']}\"\n",
    "            )\n",
    "            info_text.set_text(final_str)\n",
    "        return photon_dot, info_text\n",
    "\n",
    "    ani = animation.FuncAnimation(fig, update, frames=total_frames, init_func=init,\n",
    "                                  interval=100, blit=False, repeat=False)\n",
    "    \n",
    "    return ani, fig\n",
    "\n",
    "if __name__ == '__main__':\n",
    "    message = input(\"Enter a message for BB84 simulation: \")\n",
    "    events, key, ciphertext, decrypted_message = simulate_bb84(message)\n",
    "    \n",
    "    final_info = {\n",
    "        'key': ''.join(str(b) for b in key),\n",
    "        'ciphertext': ''.join(str(b) for b in ciphertext),\n",
    "        'decrypted_message': decrypted_message\n",
    "    }\n",
    "    \n",
    "    ani, fig = animate_events(events, final_info)\n",
    "    Writer = animation.writers['ffmpeg']\n",
    "    writer = Writer(fps=10, metadata=dict(artist='BB84 Simulation'), bitrate=1800)\n",
    "    ani.save('bb84_simulation.mp4', writer=writer)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "e99ab417-fedf-402c-87e5-dbf42d15e6d6",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.17"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
